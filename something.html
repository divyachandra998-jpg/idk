<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>idk</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
        color: #0F0;
        font-family: monospace;
        font-size: 20px;
    }

    #message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 80px;
        color: white;
        text-align: center;
        display: none;
    }
</style>
</head>
<body>

<canvas id="matrix"></canvas>
<div id="message"></div>

<script>
/****************************************************
  CLEAN FULLY-WORKING VERSION
  STYLE A â†’ CURVY DIGITAL (ROUNDED LED STYLE)
*****************************************************/

const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
resize();
window.addEventListener('resize', resize);

/****************************************************
  MATRIX RAIN
*****************************************************/
const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789#$%&*@".split("");
let drops = Array(Math.max(10, Math.floor(window.innerWidth / 14))).fill(1);

function drawRain() {
    // draw translucent black to create trailing effect
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // WHITE RAIN
    ctx.fillStyle = "#FFFFFF";
    ctx.font = "14px monospace";

    for (let i = 0; i < drops.length; i++) {
        const char = letters[Math.floor(Math.random() * letters.length)];
        const x = i * 14;
        const y = drops[i] * 14;
        ctx.fillText(char, x, y);

        if (y > canvas.height && Math.random() > 0.97) drops[i] = 0;
        drops[i]++;
    }
}

/****************************************************
  CURVY DIGITAL GRID SHAPES (OPTION A)
*****************************************************/
const GRID_3 = [
 [0,1,1,1,0],
 [0,0,0,1,0],
 [0,0,1,1,0],
 [0,0,0,1,0],
 [0,1,1,1,0]
];

const GRID_2 = [
 [0,1,1,1,0],
 [1,0,0,0,1],
 [0,0,1,1,0],
 [0,1,0,0,0],
 [1,1,1,1,1]
];

const GRID_1 = [
 [0,0,1,0,0],
 [0,1,1,0,0],
 [0,0,1,0,0],
 [0,0,1,0,0],
 [0,1,1,1,0]
];

/****************************************************
  CONVERT GRID INTO MANY TINY PARTICLES
*****************************************************/
function gridToParticles(grid, scale = 32, density = 20) {
    const arr = [];
    for (let y = 0; y < grid.length; y++) {
        const row = grid[y];
        for (let x = 0; x < row.length; x++) {
            if (row[x] === 1) {
                for (let i = 0; i < density; i++) {
                    arr.push([
                        x * scale + Math.random() * scale * 0.5,
                        y * scale + Math.random() * scale * 0.5
                    ]);
                }
            }
        }
    }
    return arr;
}

// ensure drops matches width if resized
function updateDrops() {
    const desired = Math.max(10, Math.floor(window.innerWidth / 14));
    if (desired !== drops.length) drops = Array(desired).fill(1);
}
window.addEventListener('resize', updateDrops);
updateDrops();

/****************************************************
  SHAPES (3,2,1 and multiline HAPPY BIRTHDAY TO YOU + HEART)
*****************************************************/
const SHAPES = {
    "3": gridToParticles(GRID_3, 28, 28),
    "2": gridToParticles(GRID_2, 28, 28),
    "1": gridToParticles(GRID_1, 28, 28),

    // multiline: HAPPY / BIRTHDAY / TO YOU + HEART
    "HAPPY BIRTHDAY": gridToParticles([
        // LINE 1: HAPPY (5 rows)
        // letters appended horizontally (each letter is 5 cols)
        // H  A  P  P  Y
        [1,0,0,0,1,  0,1,1,1,0,  1,1,1,1,0,  1,1,1,1,0,  1,0,0,0,1],
        [1,0,0,0,1,  1,0,0,0,1,  1,0,0,0,1,  1,0,0,0,1,  0,1,0,1,0],
        [1,1,1,1,1,  1,1,1,1,1,  1,1,1,1,0,  1,1,1,1,0,  0,0,1,0,0],
        [1,0,0,0,1,  1,0,0,0,1,  1,0,0,0,1,  1,0,0,0,1,  0,0,1,0,0],
        [1,0,0,0,1,  1,0,0,0,1,  1,0,0,0,1,  1,0,0,0,1,  0,0,1,0,0],

        // blank spacer row
        [0,0,0,0,0,  0,0,0,0,0,  0,0,0,0,0,  0,0,0,0,0,  0,0,0,0,0],

        // LINE 2: BIRTHDAY (we append letters horizontally)
        // B  I  R  T  H  D  A  Y (each 5 cols)
        [1,1,1,1,0,  1,1,1,1,1,  1,1,1,1,0,  1,1,1,1,1,  1,0,0,0,1,  1,1,1,0,0,  0,1,1,1,0,  1,0,0,0,1],
        [1,0,0,0,1,  0,0,1,0,0,  1,0,0,0,1,  0,0,1,0,0,  1,0,0,0,1,  1,0,0,1,0,  1,0,0,0,1,  1,0,0,0,1],
        [1,1,1,1,0,  0,0,1,0,0,  1,1,1,1,0,  0,0,1,0,0,  1,1,1,1,1,  1,0,0,1,0,  1,1,1,1,1,  0,0,1,0,0],
        [1,0,0,0,1,  0,0,1,0,0,  1,0,1,0,0,  0,0,1,0,0,  1,0,0,0,1,  1,0,0,1,0,  1,0,0,0,1,  0,0,1,0,0],
        [1,1,1,1,0,  1,1,1,1,1,  1,0,0,1,0,  0,0,1,0,0,  1,0,0,0,1,  1,1,1,0,0,  1,0,0,0,1,  0,1,1,1,0],

        // blank spacer row
        [0,0,0,0,0,  0,0,0,0,0,  0,0,0,0,0,  0,0,0,0,0,  0,0,0,0,0],

        // LINE 3: TO YOU + small heart
        // T   O   (space)  Y   O   U   (heart area small)
        [1,1,1,1,1,  0,1,1,1,0,  0,0,0,0,0,  1,0,0,0,1,  0,1,1,1,0,  0,1,0,1,0,  0,0,0,0,0],
        [0,0,1,0,0,  1,0,0,0,1,  0,0,0,0,0,  0,1,0,1,0,  1,0,0,0,1,  1,0,1,0,1,  0,1,0,1,0],
        [0,0,1,0,0,  1,0,0,0,1,  0,0,0,0,0,  0,0,1,0,0,  1,0,0,0,1,  1,1,0,1,1,  1,1,1,0,1],
        [0,0,1,0,0,  1,0,0,0,1,  0,0,0,0,0,  0,0,1,0,0,  1,0,0,0,1,  1,0,1,0,1,  1,0,1,0,1],
        [0,0,1,0,0,  0,1,1,1,0,  0,0,0,0,0,  0,0,1,0,0,  0,1,1,1,0,  0,1,0,1,0,  0,0,1,0,0]

    ], 20, 26)
};

let particles = [];
let targets = [];
let assembling = false;
let assembleColor = "#DC143C"; // crimson red for main text

function spawnParticles() {
    particles = [];
    for (let t of targets) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            tx: t.x,
            ty: t.y,
            char: letters[Math.floor(Math.random()*letters.length)]
        });
    }
}

function drawParticles() {
    for (let i = 0; i < particles.length; i++) {
        const p = particles[i];
        // smoother easing
        p.x += (p.tx - p.x) * 0.07;
        p.y += (p.ty - p.y) * 0.07;
        ctx.fillStyle = assembleColor;
        ctx.font = "18px monospace";
        ctx.fillText(p.char, p.x, p.y);
    }
}

/****************************************************
  SHAPE PLACEMENT (centering and character spacing)
*****************************************************/
function centerAndSpawn(shapePoints) {
    // compute bounding box of shapePoints
    let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
    for (let p of shapePoints) {
        if (p[0] < minX) minX = p[0];
        if (p[1] < minY) minY = p[1];
        if (p[0] > maxX) maxX = p[0];
        if (p[1] > maxY) maxY = p[1];
    }
    const shapeWidth = maxX - minX;
    const shapeHeight = maxY - minY;

    const offsetX = (canvas.width - shapeWidth) / 2 - minX;
    const offsetY = (canvas.height - shapeHeight) / 2 - minY;

    targets = [];
    for (let pt of shapePoints) {
        targets.push({ x: offsetX + pt[0], y: offsetY + pt[1] });
    }

    spawnParticles();
}

function buildShape(name, color) {
    assembling = true;
    assembleColor = color;
    const shape = SHAPES[name];
    centerAndSpawn(shape);
}

/****************************************************
  MAIN LOOP
*****************************************************/
function animate() {
    drawRain();
    if (assembling) drawParticles();
    requestAnimationFrame(animate);
}
animate();

/****************************************************
  TIMELINE
*****************************************************/
setTimeout(() => buildShape("3", "#DC143C"), 3000);
setTimeout(() => buildShape("2", "#DC143C"), 4300);
setTimeout(() => buildShape("1", "#DC143C"), 5600);
setTimeout(() => buildShape("HAPPY BIRTHDAY", "#DC143C"), 7200);
</script>

</body>
</html>
